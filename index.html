<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êñ∞Âπ¥ÂÄíËÆ°Êó∂ÁÉüËä± - 2026È©¨Âπ¥</title>
    <style>
        /* ÂéüÊúâCSSÁªìÊûÑ‰øùÊåÅ‰∏çÂèòÔºå‰ªÖ‰ºòÂåñËßÜËßâÊïàÊûú */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(to bottom, 
                #0a0a20 0%, 
                #1a1a40 30%, 
                #3a0a2a 60%, 
                #8B0000 80%, 
                #C62828 100%);
            color: #fff;
            font-family: 'Microsoft YaHei', 'SimHei', 'PingFang SC', sans-serif;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            padding-bottom: 70px;
            position: relative;
        }
        
        /* Â¢ûÂº∫ÊòüÁ©∫ËÉåÊôØ */
        .starry-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none;
            overflow: hidden;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite alternate;
        }
        
        .star.gold {
            background: #FFD700;
            box-shadow: 0 0 10px #FFD700, 0 0 20px #FFD700;
        }
        
        .star.silver {
            background: #FFFFFF;
            box-shadow: 0 0 10px #FFFFFF, 0 0 20px #FFFFFF;
        }
        
        /* Êñ∞Â¢ûÔºöÈáëÁ≤âÈ£òËêΩÊïàÊûú */
        .gold-dust {
            position: absolute;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, #FFD700 30%, transparent 70%);
            border-radius: 50%;
            opacity: 0;
            filter: blur(0.5px);
            pointer-events: none;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }
        
        #fireworksCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        /* È£òÈõ™ÊïàÊûú‰ºòÂåñ‰∏∫ÈáëÁ≤â */
        .snowflake {
            position: absolute;
            background: radial-gradient(circle, #FFD700 0%, #FFAA00 50%, transparent 70%);
            border-radius: 50%;
            opacity: 0.7;
            filter: blur(0.5px);
            z-index: 3;
        }
        
        /* ÂÄíËÆ°Êó∂ÂÆπÂô®‰ºòÂåñ */
        #countdown-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            text-align: center;
            z-index: 20;
            padding: 20px;
        }
        
        /* Ê†áÈ¢ò‰ºòÂåñ - ‰ΩøÁî®ÊØõÁ¨îÂ≠ó‰ΩìÊïàÊûú */
        #countdown-title {
            font-size: 5rem;
            font-weight: 900;
            color: #ffdd44;
            text-shadow: 
                0 0 20px rgba(255, 221, 68, 0.9),
                0 0 40px rgba(255, 221, 68, 0.6),
                0 0 60px rgba(255, 221, 68, 0.3);
            margin-bottom: 20px;
            animation: titlePulse 3s infinite alternate;
            letter-spacing: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 40px;
            position: relative;
            font-family: 'Microsoft YaHei', 'SimHei', sans-serif;
            font-weight: bold;
        }
        
        /* Ê∑ªÂä†Á••‰∫ëË£ÖÈ•∞ */
        #countdown-title::before,
        #countdown-title::after {
            content: "";
            font-size: 3.5rem;
            animation: cloudFloat 6s infinite ease-in-out;
            color: #FFD700;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
        }
        
        #countdown-title::before {
            content: "‚òÅÔ∏è";
            margin-right: 20px;
        }
        
        #countdown-title::after {
            content: "‚òÅÔ∏è";
            margin-left: 20px;
        }
        
        @keyframes titlePulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
                text-shadow: 
                    0 0 20px rgba(255, 221, 68, 0.9),
                    0 0 40px rgba(255, 221, 68, 0.6);
            }
            50% {
                transform: scale(1.08);
                opacity: 0.95;
                text-shadow: 
                    0 0 25px rgba(255, 221, 68, 1),
                    0 0 50px rgba(255, 221, 68, 0.8),
                    0 0 75px rgba(255, 221, 68, 0.4);
            }
        }
        
        @keyframes cloudFloat {
            0%, 100% { 
                transform: translateY(0) scale(1); 
                opacity: 0.8;
            }
            50% { 
                transform: translateY(-15px) scale(1.1); 
                opacity: 1;
            }
        }
        
        /* ÂΩìÂâçÊó∂Èó¥ÊòæÁ§∫‰ºòÂåñ */
        #currentTime {
            font-size: 1.5rem;
            color: rgba(255, 238, 153, 0.9);
            opacity: 0.9;
            margin-bottom: 40px;
            text-shadow: 0 0 8px rgba(255, 238, 153, 0.5);
            font-weight: 300;
            letter-spacing: 2px;
            background: rgba(10, 10, 30, 0.7);
            display: inline-block;
            padding: 15px 35px;
            border-radius: 15px;
            border: 2px solid rgba(255, 215, 0, 0.4);
            backdrop-filter: blur(8px);
            box-shadow: 
                0 5px 20px rgba(0, 0, 0, 0.5),
                inset 0 0 20px rgba(255, 215, 0, 0.1);
        }
        
        #countdown {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 25px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .countdown-item {
            display: flex;
            align-items: baseline;
            gap: 8px;
        }
        
        /* ÂÄíËÆ°Êó∂ÁõíÂ≠êÂÖ®Èù¢‰ºòÂåñ - Á£®Á†ÇÊ∞¥Êô∂Ë¥®ÊÑü */
        .countdown-box {
            /* Á£®Á†ÇÈÄèÊòéÂü∫Â∫ï */
            background: linear-gradient(145deg, 
                rgba(20, 15, 40, 0.7), 
                rgba(40, 30, 0, 0.8));
            backdrop-filter: blur(15px) saturate(180%);
            -webkit-backdrop-filter: blur(15px) saturate(180%);
            
            border-radius: 25px;
            padding: 30px 25px;
            min-width: 150px;
            position: relative;
            overflow: hidden;
            
            /* Ê∞¥Êô∂Ë¥®ÊÑüÊïàÊûúÂ¢ûÂº∫ */
            box-shadow: 
                inset 0 0 40px rgba(255, 255, 255, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.3),
                inset 0 -1px 0 rgba(0, 0, 0, 0.4),
                0 15px 35px rgba(0, 0, 0, 0.6);
            
            /* ÈáëËâ≤Ê∏êÂèòÊèèËæπ */
            border: 3px solid transparent;
            background-clip: padding-box;
        }
        
        /* ÈáëËâ≤Ê∏êÂèòÊèèËæπÊïàÊûúÂ¢ûÂº∫ */
        .countdown-box::after {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            background: linear-gradient(45deg, 
                #ffd700 0%, 
                #ffaa00 25%, 
                #ffd700 50%, 
                #ffaa00 75%, 
                #ffd700 100%);
            border-radius: 28px;
            z-index: -1;
            animation: borderGlow 4s linear infinite;
            opacity: 0.9;
            filter: blur(1px);
        }
        
        /* Â∫ïÈÉ®Á••‰∫ëÁ∫πÁêÜË£ÖÈ•∞Â¢ûÂº∫ */
        .countdown-box::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 35px;
            background-image: 
                radial-gradient(circle at 10% 50%, rgba(255, 215, 0, 0.4) 0%, transparent 20%),
                radial-gradient(circle at 30% 50%, rgba(255, 215, 0, 0.3) 0%, transparent 25%),
                radial-gradient(circle at 50% 50%, rgba(255, 215, 0, 0.35) 0%, transparent 23%),
                radial-gradient(circle at 70% 50%, rgba(255, 215, 0, 0.3) 0%, transparent 25%),
                radial-gradient(circle at 90% 50%, rgba(255, 215, 0, 0.4) 0%, transparent 20%);
            background-size: 100% 100%;
            z-index: 1;
            opacity: 0.8;
            border-radius: 0 0 25px 25px;
            filter: blur(1px);
        }
        
        /* Ê∞¥Êô∂Ë¥®ÊÑüÊï∞Â≠ó */
        .countdown-box .countdown-value {
            position: relative;
            z-index: 2;
            font-size: 5.5rem;
            font-weight: 900;
            background: linear-gradient(145deg, 
                #FFD700 0%, 
                #FFA500 25%, 
                #FF8C00 50%, 
                #FFA500 75%, 
                #FFD700 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            margin-bottom: 10px;
            text-shadow: 
                0 3px 6px rgba(0, 0, 0, 0.6),
                0 0 25px rgba(255, 215, 0, 0.4);
            filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.6));
            font-family: 'Microsoft YaHei', 'SimHei', sans-serif;
            font-weight: bold;
        }
        
        /* Â¢ûÂº∫ËæπÊ°ÜÂèëÂÖâÊïàÊûú */
        @keyframes borderGlow {
            0% {
                opacity: 0.7;
                filter: blur(1px) brightness(0.9);
                background: linear-gradient(45deg, 
                    #ffd700 0%, 
                    #ffaa00 25%, 
                    #ffd700 50%, 
                    #ffaa00 75%, 
                    #ffd700 100%);
            }
            25% {
                opacity: 0.9;
                filter: blur(1.5px) brightness(1.1);
                background: linear-gradient(45deg, 
                    #ffaa00 0%, 
                    #ffd700 25%, 
                    #ffaa00 50%, 
                    #ffd700 75%, 
                    #ffaa00 100%);
            }
            50% {
                opacity: 1;
                filter: blur(2px) brightness(1.2);
                background: linear-gradient(45deg, 
                    #ffd700 0%, 
                    #ffaa00 25%, 
                    #ffd700 50%, 
                    #ffaa00 75%, 
                    #ffd700 100%);
            }
            75% {
                opacity: 0.9;
                filter: blur(1.5px) brightness(1.1);
                background: linear-gradient(45deg, 
                    #ffaa00 0%, 
                    #ffd700 25%, 
                    #ffaa00 50%, 
                    #ffd700 75%, 
                    #ffaa00 100%);
            }
            100% {
                opacity: 0.7;
                filter: blur(1px) brightness(0.9);
                background: linear-gradient(45deg, 
                    #ffd700 0%, 
                    #ffaa00 25%, 
                    #ffd700 50%, 
                    #ffaa00 75%, 
                    #ffd700 100%);
            }
        }
        
        /* Êñ∞Â¢ûÔºöÁ£®Á†ÇË¥®ÊÑüÁöÑÂÜÖÈÉ®ÂÖâÊïà */
        .shine-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(145deg, 
                rgba(255, 215, 0, 0.08) 0%, 
                rgba(255, 165, 0, 0.12) 50%, 
                rgba(255, 215, 0, 0.08) 100%);
            z-index: 1;
            animation: shineMove 8s infinite linear;
            border-radius: 25px;
        }
        
        @keyframes shineMove {
            0% {
                transform: translateX(-100%) skewX(-15deg);
            }
            100% {
                transform: translateX(100%) skewX(-15deg);
            }
        }
        
        .countdown-unit {
            font-size: 1.8rem;
            color: #ffdd88;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 0 15px rgba(255, 221, 136, 0.9);
            font-weight: 700;
            margin-left: 10px;
            font-family: 'Microsoft YaHei', 'SimHei', sans-serif;
            font-weight: bold;
        }
        
        .separator {
            font-size: 4rem;
            color: #FFA500;
            margin: 0 12px;
            text-shadow: 0 0 20px rgba(255, 165, 0, 0.9);
            animation: separatorPulse 2s infinite;
            align-self: flex-end;
            margin-bottom: 50px;
        }
        
        @keyframes separatorPulse {
            0%, 100% { 
                opacity: 0.8;
                transform: scale(1);
            }
            50% { 
                opacity: 1;
                transform: scale(1.2);
            }
        }
        
        /* Â∫ïÈÉ®ÊñáÂ≠ó‰ºòÂåñ */
        #nextYear {
            font-size: 3rem;
            color: #FFCC66;
            margin-top: 50px;
            text-shadow: 0 0 20px rgba(255, 204, 102, 0.9);
            font-weight: 600;
            letter-spacing: 4px;
            animation: subtitleGlow 4s ease-in-out infinite alternate;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px 40px;
            border-radius: 25px;
            display: inline-block;
            border: 2px solid rgba(255, 204, 102, 0.3);
            backdrop-filter: blur(5px);
            font-family: 'Microsoft YaHei', 'SimHei', sans-serif;
        }
        
        @keyframes subtitleGlow {
            0% {
                text-shadow: 0 0 15px rgba(255, 204, 102, 0.8);
                transform: scale(1);
            }
            50% {
                text-shadow: 0 0 25px rgba(255, 204, 102, 1);
                transform: scale(1.03);
            }
            100% {
                text-shadow: 0 0 15px rgba(255, 204, 102, 0.8);
                transform: scale(1);
            }
        }
        
        #timeStatus {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1.3rem;
            color: rgba(136, 170, 255, 0.8);
            z-index: 20;
            background: rgba(0, 0, 0, 0.5);
            padding: 12px 20px;
            border-radius: 12px;
            border: 1px solid rgba(255, 204, 0, 0.3);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
            font-weight: 400;
            text-shadow: 0 0 8px rgba(136, 170, 255, 0.6);
            backdrop-filter: blur(8px);
        }
        
        #finalCountdownStatus {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 1.3rem;
            color: #ff4444;
            z-index: 20;
            background: rgba(0, 0, 0, 0.7);
            padding: 12px 25px;
            border-radius: 12px;
            border: 1px solid rgba(255, 50, 50, 0.6);
            box-shadow: 0 8px 20px rgba(255, 0, 0, 0.4);
            font-weight: 700;
            text-shadow: 0 0 12px rgba(255, 50, 50, 0.9);
            backdrop-filter: blur(8px);
            display: none;
        }
        
        /* È©¨Âπ¥ËäÇÊó•ÂÖÉÁ¥†‰ºòÂåñ */
        .festival-element {
            position: absolute;
            z-index: 10;
            pointer-events: none;
            user-select: none;
            filter: drop-shadow(0 5px 15px rgba(255, 215, 0, 0.7));
        }
        
        .lantern {
            width: 80px;
            height: 100px;
            animation: lanternSwing 6s ease-in-out infinite;
            filter: drop-shadow(0 5px 15px rgba(255, 100, 0, 0.8));
        }
        
        .knot {
            width: 70px;
            height: 70px;
            animation: knotFloat 8s ease-in-out infinite;
            filter: drop-shadow(0 5px 15px rgba(200, 0, 0, 0.8));
        }
        
        .horse {
            width: 60px;
            height: 60px;
            animation: horseGallop 10s ease-in-out infinite;
            filter: drop-shadow(0 5px 15px rgba(255, 215, 0, 0.8));
        }
        
        @keyframes lanternSwing {
            0%, 100% { 
                transform: rotate(-5deg) translateY(0); 
            }
            25% { 
                transform: rotate(3deg) translateY(-8px); 
            }
            50% { 
                transform: rotate(5deg) translateY(0); 
            }
            75% { 
                transform: rotate(-3deg) translateY(8px); 
            }
        }
        
        @keyframes knotFloat {
            0%, 100% { 
                transform: translateY(0) rotate(0deg) scale(1); 
            }
            33% { 
                transform: translateY(-15px) rotate(5deg) scale(1.1); 
            }
            66% { 
                transform: translateY(10px) rotate(-5deg) scale(0.95); 
            }
        }
        
        @keyframes horseGallop {
            0%, 100% { 
                transform: translateY(0) scaleX(1); 
            }
            20% { 
                transform: translateY(-12px) scaleX(1); 
            }
            40% { 
                transform: translateY(0) scaleX(1); 
            }
            60% { 
                transform: translateY(-12px) scaleX(-1); 
            }
            80% { 
                transform: translateY(0) scaleX(-1); 
            }
        }
        
        /* ÁÅØÁ¨º‰∏≤‰ºòÂåñ */
        .lantern-string {
            position: absolute;
            z-index: 11;
            pointer-events: none;
        }
        
        .lantern-string.left {
            left: 5%;
            top: 5%;
            height: 90%;
        }
        
        .lantern-string.right {
            right: 5%;
            top: 5%;
            height: 90%;
        }
        
        .lantern-string::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 100%;
            background: linear-gradient(to bottom, 
                #8B4513 0%, 
                #A0522D 30%, 
                #8B4513 70%, 
                #654321 100%);
            border-radius: 3px;
            box-shadow: 0 0 10px rgba(139, 69, 19, 0.7);
            z-index: 1;
        }
        
        .lantern-item {
            position: absolute;
            width: 70px;
            height: 90px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 12;
            cursor: pointer;
            transition: all 0.3s ease;
            animation: lanternSwing 4s infinite ease-in-out;
        }
        
        .lantern-item:nth-child(2n) {
            animation-delay: 2s;
        }
        
        .lantern-body {
            position: relative;
            width: 100%;
            height: 80px;
            background: linear-gradient(145deg, 
                #ff0000 0%, 
                #cc0000 30%, 
                #ff3333 50%, 
                #cc0000 70%, 
                #990000 100%);
            border-radius: 35px 35px 25px 25px;
            box-shadow: 
                0 4px 15px rgba(0, 0, 0, 0.6),
                inset 0 0 20px rgba(255, 255, 255, 0.2),
                0 0 20px rgba(255, 0, 0, 0.7);
            overflow: hidden;
        }
        
        .lantern-top {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 15px;
            background: linear-gradient(145deg, 
                #ffd700 0%, 
                #ffaa00 50%, 
                #ffd700 100%);
            border-radius: 40px 40px 10px 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            z-index: 2;
        }
        
        .lantern-bottom {
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 15px;
            background: linear-gradient(145deg, 
                #ffd700 0%, 
                #ffaa00 50%, 
                #ffd700 100%);
            border-radius: 10px 10px 40px 40px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            z-index: 2;
        }
        
        .lantern-middle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 85%;
            height: 15px;
            background: linear-gradient(145deg, 
                #ffd700 0%, 
                #ffaa00 50%, 
                #ffd700 100%);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
            z-index: 1;
        }
        
        .lantern-tassel {
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            width: 10px;
            height: 40px;
            background: linear-gradient(to bottom, 
                #ffd700 0%, 
                #ffaa00 30%, 
                #ff8c00 70%, 
                #ffd700 100%);
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        .lantern-tassel::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 8px;
            background: linear-gradient(to right, 
                #ffd700 0%, 
                #ffaa00 50%, 
                #ffd700 100%);
            border-radius: 10px;
        }
        
        .lantern-light {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 60px;
            background: radial-gradient(circle at center, 
                rgba(255, 255, 200, 0.9) 0%,
                rgba(255, 255, 150, 0.7) 30%,
                rgba(255, 200, 0, 0.4) 70%,
                transparent 100%);
            border-radius: 25px;
            filter: blur(5px);
            z-index: 0;
            animation: lanternGlow 3s ease-in-out infinite alternate;
        }
        
        @keyframes lanternGlow {
            0%, 100% {
                opacity: 0.7;
                box-shadow: 0 0 20px rgba(255, 255, 200, 0.5),
                            inset 0 0 30px rgba(255, 255, 200, 0.3);
            }
            50% {
                opacity: 1;
                box-shadow: 0 0 30px rgba(255, 255, 200, 0.8),
                            inset 0 0 40px rgba(255, 255, 200, 0.5);
            }
        }
        
        .lantern-blessing {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.5rem;
            font-weight: 900;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
            z-index: 3;
            opacity: 0.9;
            font-family: 'Microsoft YaHei', 'SimHei', sans-serif;
        }
        
        .lantern-item.clicked .lantern-body {
            animation: lanternClick 0.8s ease-out forwards;
        }
        
        .lantern-item.clicked .lantern-light {
            animation: lanternClickGlow 0.8s ease-out forwards;
        }
        
        @keyframes lanternClick {
            0% {
                transform: scale(1);
                box-shadow: 
                    0 4px 15px rgba(0, 0, 0, 0.6),
                    inset 0 0 20px rgba(255, 255, 255, 0.2),
                    0 0 20px rgba(255, 0, 0, 0.7);
            }
            50% {
                transform: scale(1.3);
                box-shadow: 
                    0 8px 25px rgba(0, 0, 0, 0.7),
                    inset 0 0 30px rgba(255, 255, 255, 0.4),
                    0 0 40px rgba(255, 0, 0, 1);
            }
            100% {
                transform: scale(1);
                box-shadow: 
                    0 4px 15px rgba(0, 0, 0, 0.6),
                    inset 0 0 20px rgba(255, 255, 255, 0.2),
                    0 0 20px rgba(255, 0, 0, 0.7);
            }
        }
        
        @keyframes lanternClickGlow {
            0% {
                opacity: 0.7;
                box-shadow: 0 0 20px rgba(255, 255, 200, 0.5);
            }
            50% {
                opacity: 1;
                box-shadow: 0 0 50px rgba(255, 255, 200, 1);
            }
            100% {
                opacity: 0.7;
                box-shadow: 0 0 20px rgba(255, 255, 200, 0.5);
            }
        }
        
        /* Êñ∞Â¢ûÔºöÂÆöÊó∂ÁÉüËä±ÁªΩÊîæÊïàÊûú */
        .corner-firework {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
            z-index: 4;
        }
        
        /* Â∞èÂûãÁÉüËä±ÁàÜÁÇ∏ÊïàÊûú‰ºòÂåñ */
        .mini-firework {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            z-index: 3;
            pointer-events: none;
            opacity: 0;
        }
        
        /* ÁÉüËä±Á≤íÂ≠êÊïàÊûú‰ºòÂåñ */
        .particle {
            position: absolute;
            border-radius: 50%;
            opacity: 0;
            z-index: 3;
            pointer-events: none;
        }
        
        /* ÊúÄÂêé10ÁßíÂº∫ÂåñÊïàÊûú */
        .countdown-box.final-countdown {
            animation: finalPulse 0.5s infinite alternate !important;
            border-color: #ff3333 !important;
            box-shadow: 
                0 10px 25px rgba(255, 0, 0, 0.8),
                0 0 30px rgba(255, 50, 50, 0.8),
                inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
        }
        
        .countdown-box.final-countdown .countdown-value {
            animation: finalBounce 0.8s ease infinite alternate !important;
            background: linear-gradient(145deg, 
                #ff3333 20%, 
                #ff6666 40%, 
                #ff3333 60%, 
                #ff0000 80%) !important;
            text-shadow: 
                0 0 15px #FF3333,
                0 0 25px #FF0000,
                0 2px 4px rgba(0, 0, 0, 0.7) !important;
        }
        
        @keyframes finalPulse {
            0% {
                transform: scale(1);
                box-shadow: 0 10px 25px rgba(255, 0, 0, 0.8);
            }
            100% {
                transform: scale(1.05);
                box-shadow: 0 15px 35px rgba(255, 0, 0, 1);
            }
        }
        
        @keyframes finalBounce {
            0% {
                transform: scale(1) translateY(0);
            }
            100% {
                transform: scale(1.2) translateY(-10px);
            }
        }
        
        /* Êï∞Â≠óÂºπË∑≥Âä®Áîª - Â¢ûÂº∫Áâà */
        @keyframes numberBounce {
            0% {
                transform: scale(1) translateY(0);
            }
            30% {
                transform: scale(1.15) translateY(-8px);
            }
            50% {
                transform: scale(0.92) translateY(3px);
            }
            70% {
                transform: scale(1.08) translateY(-3px);
            }
            100% {
                transform: scale(1) translateY(0);
            }
        }
        
        .floating-blessing {
            position: absolute;
            font-size: 32px;
            font-weight: bold;
            z-index: 15;
            opacity: 0;
            animation: floatUp 5s ease-out forwards;
            text-shadow: 0 0 15px currentColor;
            pointer-events: none;
        }
        
        @keyframes floatUp {
            0% {
                opacity: 0;
                transform: translateY(0) scale(0.8);
            }
            20% {
                opacity: 1;
                transform: translateY(-25px) scale(1.15);
            }
            80% {
                opacity: 1;
                transform: translateY(-180px) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-250px) scale(0.9);
            }
        }
        
        /* Êñ∞Âπ¥ËøõÂ∫¶Êù° - ‰ºòÂåñÁâà */
        #progress-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 80px;
            background: linear-gradient(to top, rgba(139, 0, 0, 0.9), rgba(178, 34, 34, 0.8));
            backdrop-filter: blur(15px);
            border-top: 3px solid rgba(255, 215, 0, 0.4);
            z-index: 25;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 0 30px;
            box-shadow: 0 -10px 30px rgba(139, 0, 0, 0.7);
        }
        
        #progress-bar {
            width: 100%;
            height: 24px;
            background: linear-gradient(to bottom, 
                rgba(50, 0, 0, 0.9), 
                rgba(80, 0, 0, 0.95));
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            border: 2px solid rgba(255, 215, 0, 0.6);
            box-shadow: 
                inset 0 3px 8px rgba(0, 0, 0, 0.6),
                0 0 15px rgba(255, 215, 0, 0.4);
        }
        
        #progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, 
                #ff8c00 0%, 
                #ffaa00 25%, 
                #ffd700 50%, 
                #ffaa00 75%, 
                #ff8c00 100%);
            border-radius: 10px;
            position: relative;
            transition: width 1s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 
                0 0 20px rgba(255, 215, 0, 0.8),
                inset 0 2px 0 rgba(255, 255, 255, 0.4),
                inset 0 -2px 0 rgba(0, 0, 0, 0.3);
        }
        
        #progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.3) 50%, 
                transparent 100%);
            animation: progressShine 2.5s infinite linear;
            border-radius: 10px;
        }
        
        @keyframes progressShine {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }
        
        #progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 12px;
            font-size: 1rem;
            color: #ffdd88;
            text-shadow: 0 0 8px rgba(255, 221, 136, 0.6);
            font-weight: 500;
        }
        
        #progress-percent {
            font-size: 1.3rem;
            font-weight: 800;
            color: #ffd700;
            text-shadow: 0 0 12px rgba(255, 215, 0, 0.9);
            background: rgba(0, 0, 0, 0.3);
            padding: 4px 12px;
            border-radius: 20px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }
        
        .new-year-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 6rem;
            font-weight: 900;
            color: #ffdd44;
            text-align: center;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            text-shadow: 
                0 0 30px rgba(255, 221, 68, 0.9),
                0 0 60px rgba(255, 221, 68, 0.7),
                0 0 90px rgba(255, 221, 68, 0.5);
            animation: newYearAnimation 12s ease-out forwards;
        }
        
        @keyframes newYearAnimation {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5) rotate(-10deg);
            }
            10% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.4) rotate(0deg);
            }
            20% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
            }
            80% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8) rotate(5deg);
            }
        }
        
        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 1024px) {
            #countdown-title {
                font-size: 4rem;
            }
            
            .countdown-value {
                font-size: 4.5rem;
            }
            
            #nextYear {
                font-size: 2.5rem;
            }
            
            .lantern { width: 65px; height: 85px; }
            .knot { width: 60px; height: 60px; }
            .horse { width: 55px; height: 55px; }
            
            .lantern-string.left {
                left: 3%;
            }
            
            .lantern-string.right {
                right: 3%;
            }
            
            .lantern-item {
                width: 60px;
                height: 80px;
            }
            
            .lantern-body {
                height: 70px;
            }
            
            .lantern-blessing {
                font-size: 2rem;
            }
            
            #progress-container {
                height: 70px;
                padding: 0 20px;
            }
            
            #progress-bar {
                height: 20px;
            }
            
            #progress-text {
                font-size: 0.95rem;
            }
        }
        
        @media (max-width: 768px) {
            #countdown-title {
                font-size: 3.2rem;
                letter-spacing: 5px;
                gap: 20px;
            }
            
            #countdown-title::before,
            #countdown-title::after {
                font-size: 2.5rem;
            }
            
            #currentTime {
                font-size: 1.3rem;
                padding: 12px 25px;
            }
            
            .countdown-box {
                min-width: 120px;
                padding: 25px 15px;
            }
            
            .countdown-value {
                font-size: 3.8rem;
            }
            
            .countdown-unit {
                font-size: 1.5rem;
            }
            
            .separator {
                font-size: 3rem;
            }
            
            #nextYear {
                font-size: 2.2rem;
                letter-spacing: 3px;
                padding: 15px 30px;
            }
            
            .new-year-message {
                font-size: 4.5rem;
            }
            
            .lantern { width: 50px; height: 70px; }
            .knot { width: 50px; height: 50px; }
            .horse { width: 45px; height: 45px; }
            
            #progress-container {
                height: 65px;
                padding: 0 15px;
            }
            
            #progress-bar {
                height: 18px;
            }
            
            #progress-text {
                font-size: 0.9rem;
                margin-top: 10px;
            }
            
            #progress-percent {
                font-size: 1.2rem;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding-bottom: 65px;
            }
            
            #countdown {
                gap: 10px;
            }
            
            .countdown-box {
                min-width: 100px;
                padding: 20px 10px;
                border-radius: 20px;
            }
            
            .countdown-value {
                font-size: 3rem;
            }
            
            #countdown-title {
                font-size: 2.5rem;
                gap: 10px;
                letter-spacing: 3px;
                flex-direction: column;
            }
            
            #countdown-title::before,
            #countdown-title::after {
                font-size: 2rem;
            }
            
            #currentTime {
                font-size: 1.1rem;
                padding: 10px 20px;
                margin-bottom: 30px;
            }
            
            #nextYear {
                font-size: 1.8rem;
                letter-spacing: 2px;
                padding: 12px 25px;
                margin-top: 40px;
            }
            
            .new-year-message {
                font-size: 3.5rem;
            }
            
            .countdown-unit {
                font-size: 1.2rem;
            }
            
            .separator {
                font-size: 2.2rem;
                margin: 0 5px;
            }
            
            .festival-element {
                display: none;
            }
            
            #progress-container {
                height: 60px;
                padding: 0 10px;
            }
            
            #progress-bar {
                height: 16px;
                border-width: 1.5px;
            }
            
            #progress-text {
                font-size: 0.85rem;
                margin-top: 8px;
            }
            
            #progress-percent {
                font-size: 1.1rem;
                padding: 3px 10px;
            }
        }
    </style>
</head>
<body>
    <!-- ÂÆåÂÖ®‰øùÊåÅÂéüÊúâHTMLÁªìÊûÑ -->
    <div id="timeStatus">Á≥ªÁªüËøêË°å‰∏≠...</div>
    <div id="finalCountdownStatus">ÊúÄÂêé10ÁßíÔºÅ</div>
    
    <!-- È©¨Âπ¥ËäÇÊó•ÂÖÉÁ¥† -->
    <div class="festival-element lantern" style="top: 20px; left: 20px;">üèÆ</div>
    <div class="festival-element knot" style="top: 20px; right: 20px;">üßß</div>
    <div class="festival-element horse" style="bottom: 80px; left: 30px;">üêé</div>
    <div class="festival-element lantern" style="bottom: 80px; right: 30px;">üèÆ</div>
    <div class="festival-element knot" style="top: 50%; left: 15px; transform: translateY(-50%);">üßß</div>
    <div class="festival-element horse" style="top: 50%; right: 15px; transform: translateY(-50%);">üêé</div>
    
    <!-- Âä®ÊÄÅÁÅØÁ¨º‰∏≤ -->
    <div class="lantern-string left"></div>
    <div class="lantern-string right"></div>
    
    <div id="countdown-container">
        <h1 id="countdown-title">Êñ∞Âπ¥ÂÄíËÆ°Êó∂</h1>
        <div id="currentTime"></div>
        <div id="countdown">
            <div class="countdown-item">
                <div class="countdown-box">
                    <div class="shine-overlay"></div>
                    <div id="days" class="countdown-value">00</div>
                </div>
                <span class="countdown-unit">Â§©</span>
            </div>
            <span class="separator"></span>
            <div class="countdown-item">
                <div class="countdown-box">
                    <div class="shine-overlay"></div>
                    <div id="hours" class="countdown-value">00</div>
                </div>
                <span class="countdown-unit">Â∞èÊó∂</span>
            </div>
            <span class="separator"></span>
            <div class="countdown-item">
                <div class="countdown-box">
                    <div class="shine-overlay"></div>
                    <div id="minutes" class="countdown-value">00</div>
                </div>
                <span class="countdown-unit">ÂàÜÈíü</span>
            </div>
            <span class="separator"></span>
            <div class="countdown-item">
                <div class="countdown-box">
                    <div class="shine-overlay"></div>
                    <div id="seconds" class="countdown-value">00</div>
                </div>
                <span class="countdown-unit">Áßí</span>
            </div>
        </div>
        <div id="nextYear">Ë∑ùÁ¶ª <span id="targetYear">2026</span> Âπ¥Êñ∞Âπ¥ËøòÊúâ</div>
    </div>
    
    <!-- Êñ∞Âπ¥ËøõÂ∫¶Êù° -->
    <div id="progress-container">
        <div id="progress-bar">
            <div id="progress-fill"></div>
        </div>
        <div id="progress-text">
            <span>üéØ Êñ∞Âπ¥ËøõÂ∫¶Ôºö<span id="progress-percent">0%</span></span>
            <span>‚è≥ Ë∑ùÁ¶ªÊñ∞Âπ¥Ôºö<span id="progress-time">0Â§©0Â∞èÊó∂0ÂàÜ</span></span>
        </div>
    </div>
    
    <canvas id="fireworksCanvas"></canvas>

    <script>
        // ÂÆåÂÖ®‰øùÊåÅÂéüÊúâJavaScriptÈÄªËæëÁªìÊûÑ
        const canvas = document.getElementById('fireworksCanvas');
        const ctx = canvas.getContext('2d');
        
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        const blessings = [
            "Êñ∞Âπ¥Âø´‰πêÔºÅ", "‰∏á‰∫ãÂ¶ÇÊÑèÔºÅ", "ÊÅ≠ÂñúÂèëË¥¢ÔºÅ", 
            "Â≤ÅÂ≤ÅÂπ≥ÂÆâÔºÅ", "È©¨Âπ¥Â§ßÂêâÔºÅ", "ÂøÉÊÉ≥‰∫ãÊàêÔºÅ",
            "ÈòñÂÆ∂Âπ∏Á¶èÔºÅ", "ÂêâÁ••Â¶ÇÊÑèÔºÅ", "Á¶èÊòüÈ´òÁÖßÔºÅ",
            "Ë∫´‰ΩìÂÅ•Â∫∑ÔºÅ", "Ë¥¢Ê∫êÂπøËøõÔºÅ", "Á¨ëÂè£Â∏∏ÂºÄÔºÅ",
            "Â•ΩËøêËøûËøûÔºÅ", "Ê≠•Ê≠•È´òÂçáÔºÅ", "Âπ∏Á¶èÁæéÊª°ÔºÅ",
            "È©¨Âà∞ÊàêÂäüÔºÅ", "ÈæôÈ©¨Á≤æÁ•ûÔºÅ", "‰∏ÄÈ©¨ÂΩìÂÖàÔºÅ"
        ];
        
        const lanternBlessings = ["Á¶è", "Êò•", "Âêâ", "Á••", "Âèë", "Ë¥¢", "Âñú", "‰πê"];
        
        let fireworks = [];
        let particles = [];
        let nextNewYear;
        let totalMilliseconds = 0;
        let isCelebrating = false;
        let lastSecond = -1;
        let lastValues = { days: 0, hours: 0, minutes: 0, seconds: 0 };
        let audioContext;
        let tickSoundBuffer;
        let transitionSoundBuffer;
        let firecrackerSoundBuffer;
        let isFinal10Seconds = false;
        let finalCountdownActive = false;
        let preMinuteMode = false;
        let lanterns = [];
        let autoLanternInterval;
        let cornerFireworkInterval;
        
        const daysElem = document.getElementById('days');
        const hoursElem = document.getElementById('hours');
        const minutesElem = document.getElementById('minutes');
        const secondsElem = document.getElementById('seconds');
        const targetYearElem = document.getElementById('targetYear');
        const currentTimeElem = document.getElementById('currentTime');
        const timeStatusElem = document.getElementById('timeStatus');
        const finalCountdownStatusElem = document.getElementById('finalCountdownStatus');
        const countdownBoxes = document.querySelectorAll('.countdown-box');
        const progressFill = document.getElementById('progress-fill');
        const progressPercent = document.getElementById('progress-percent');
        const progressTime = document.getElementById('progress-time');
        const lanternStringLeft = document.querySelector('.lantern-string.left');
        const lanternStringRight = document.querySelector('.lantern-string.right');
        
        // ÂàõÂª∫ÊòüÁ©∫ËÉåÊôØ - Â¢ûÂº∫Áâà
        function createStarryBackground() {
            const starryBg = document.createElement('div');
            starryBg.className = 'starry-background';
            
            for (let i = 0; i < 600; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                
                const size = Math.random() * 4 + 1;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                
                if (Math.random() > 0.5) {
                    star.classList.add('gold');
                } else {
                    star.classList.add('silver');
                }
                
                const delay = Math.random() * 5;
                const duration = 2 + Math.random() * 5;
                
                star.style.animation = `twinkle ${duration}s ${delay}s infinite alternate`;
                starryBg.appendChild(star);
            }
            
            document.body.appendChild(starryBg);
            
            // ÂàõÂª∫ÈáëÁ≤âÈ£òËêΩ
            createGoldDust();
        }
        
        // ÂàõÂª∫ÈáëÁ≤âÈ£òËêΩÊïàÊûú
        function createGoldDust() {
            for (let i = 0; i < 150; i++) {
                const dust = document.createElement('div');
                dust.className = 'gold-dust';
                
                dust.style.left = `${Math.random() * 100}%`;
                dust.style.top = `${Math.random() * 100}%`;
                
                const size = Math.random() * 3 + 2;
                dust.style.width = `${size}px`;
                dust.style.height = `${size}px`;
                
                const duration = 10 + Math.random() * 20;
                const delay = Math.random() * 5;
                const fallDistance = 50 + Math.random() * 100;
                
                const animationName = `dustFall-${Date.now()}-${i}`;
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes ${animationName} {
                        0% {
                            opacity: 0;
                            transform: translateY(0) rotate(0deg);
                        }
                        10% {
                            opacity: ${Math.random() * 0.5 + 0.3};
                        }
                        90% {
                            opacity: ${Math.random() * 0.5 + 0.3};
                        }
                        100% {
                            opacity: 0;
                            transform: translateY(${fallDistance}px) rotate(${Math.random() * 360}deg);
                        }
                    }
                `;
                document.head.appendChild(style);
                
                dust.style.animation = `${animationName} ${duration}s ${delay}s infinite linear`;
                document.body.appendChild(dust);
            }
        }
        
        // ÂàõÂª∫È£òÈõ™ÊïàÊûú - ‰ºòÂåñ‰∏∫ÈáëÁ≤â
        function createSnowfall() {
            setInterval(() => {
                if (Math.random() > 0.6) {
                    const snowflake = document.createElement('div');
                    snowflake.className = 'snowflake';
                    
                    snowflake.style.left = `${Math.random() * 100}%`;
                    snowflake.style.top = `-20px`;
                    
                    const size = Math.random() * 5 + 2;
                    snowflake.style.width = `${size}px`;
                    snowflake.style.height = `${size}px`;
                    
                    snowflake.style.opacity = Math.random() * 0.6 + 0.4;
                    
                    const duration = 15 + Math.random() * 25;
                    const delay = Math.random() * 3;
                    
                    const rotateStart = Math.random() * 360;
                    const rotateEnd = rotateStart + (Math.random() * 720 - 360);
                    const swingDistance = Math.random() * 50 - 25;
                    
                    const animationName = `fall-${Date.now()}`;
                    const style = document.createElement('style');
                    style.textContent = `
                        @keyframes ${animationName} {
                            0% {
                                transform: translateY(0) translateX(0) rotate(${rotateStart}deg);
                            }
                            100% {
                                transform: translateY(${window.innerHeight + 100}px) translateX(${swingDistance}px) rotate(${rotateEnd}deg);
                            }
                        }
                    `;
                    document.head.appendChild(style);
                    
                    snowflake.style.animation = `${animationName} ${duration}s linear ${delay}s forwards`;
                    document.body.appendChild(snowflake);
                    
                    setTimeout(() => {
                        if (snowflake.parentNode) {
                            snowflake.parentNode.removeChild(snowflake);
                        }
                    }, (duration + delay) * 1000);
                }
            }, 150);
        }
        
        // ÂàõÂª∫Â∞èÂûãÁÉüËä±ÁàÜÁÇ∏ÊïàÊûú
        function createMiniFireworks() {
            setInterval(() => {
                if (Math.random() > 0.7 && !isFinal10Seconds) {
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * window.innerHeight * 0.7;
                    
                    const firework = document.createElement('div');
                    firework.className = 'mini-firework';
                    
                    const hue = 30 + Math.random() * 30;
                    firework.style.background = `hsl(${hue}, 100%, 65%)`;
                    firework.style.boxShadow = `0 0 10px hsl(${hue}, 100%, 65%)`;
                    
                    firework.style.left = `${x}px`;
                    firework.style.top = `${y}px`;
                    
                    const animationName = `mini-explode-${Date.now()}`;
                    const style = document.createElement('style');
                    style.textContent = `
                        @keyframes ${animationName} {
                            0% {
                                opacity: 0;
                                transform: scale(0);
                                box-shadow: 0 0 0px hsl(${hue}, 100%, 65%);
                            }
                            30% {
                                opacity: 1;
                                transform: scale(2);
                                box-shadow: 0 0 20px hsl(${hue}, 100%, 65%);
                            }
                            100% {
                                opacity: 0;
                                transform: scale(4);
                                box-shadow: 0 0 0px transparent;
                            }
                        }
                    `;
                    document.head.appendChild(style);
                    
                    firework.style.animation = `${animationName} 1.2s ease-out forwards`;
                    document.body.appendChild(firework);
                    
                    playMiniFireworkSound();
                    
                    setTimeout(() => {
                        if (firework.parentNode) {
                            firework.parentNode.removeChild(firework);
                        }
                    }, 1200);
                }
            }, 2500);
        }
        
        // ÂàõÂª∫ÂÆöÊó∂ÁÉüËä±ÁªΩÊîæÊïàÊûúÔºàËßíËêΩÔºâ
        function createCornerFireworks() {
            if (cornerFireworkInterval) clearInterval(cornerFireworkInterval);
            
            cornerFireworkInterval = setInterval(() => {
                if (Math.random() > 0.5) {
                    const corners = [
                        {x: 50, y: 50},
                        {x: window.innerWidth - 50, y: 50},
                        {x: 50, y: window.innerHeight - 50},
                        {x: window.innerWidth - 50, y: window.innerHeight - 50}
                    ];
                    
                    const corner = corners[Math.floor(Math.random() * corners.length)];
                    createCornerFirework(corner.x, corner.y);
                }
            }, 3000);
        }
        
        function createCornerFirework(x, y) {
            const firework = document.createElement('div');
            firework.className = 'corner-firework';
            
            const hue = Math.random() * 60 + 10;
            firework.style.background = `hsl(${hue}, 100%, 65%)`;
            firework.style.boxShadow = `0 0 15px hsl(${hue}, 100%, 65%)`;
            
            firework.style.left = `${x}px`;
            firework.style.top = `${y}px`;
            
            const particleCount = 12 + Math.floor(Math.random() * 8);
            const explosionSize = 60 + Math.random() * 60;
            
            const animationName = `corner-explode-${Date.now()}`;
            const style = document.createElement('style');
            style.textContent = `
                @keyframes ${animationName} {
                    0% {
                        opacity: 0;
                        transform: scale(0);
                        box-shadow: 0 0 0px hsl(${hue}, 100%, 65%);
                    }
                    30% {
                        opacity: 1;
                        transform: scale(1);
                        box-shadow: 0 0 25px hsl(${hue}, 100%, 65%);
                    }
                    100% {
                        opacity: 0;
                        transform: scale(0);
                        box-shadow: 0 0 0px transparent;
                    }
                }
            `;
            document.head.appendChild(style);
            
            firework.style.animation = `${animationName} 1.5s ease-out forwards`;
            document.body.appendChild(firework);
            
            for (let i = 0; i < particleCount; i++) {
                setTimeout(() => {
                    createFireworkParticle(x, y, hue, explosionSize);
                }, i * 30);
            }
            
            playMiniFireworkSound();
            
            setTimeout(() => {
                if (firework.parentNode) {
                    firework.parentNode.removeChild(firework);
                }
            }, 1500);
        }
        
        function createFireworkParticle(x, y, hue, distance) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            
            particle.style.background = `hsl(${hue}, 100%, 60%)`;
            particle.style.boxShadow = `0 0 12px hsl(${hue}, 100%, 60%)`;
            
            const size = Math.random() * 4 + 2;
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            
            particle.style.left = `${x}px`;
            particle.style.top = `${y}px`;
            
            const angle = Math.random() * Math.PI * 2;
            const particleDistance = distance * (0.5 + Math.random() * 0.5);
            
            const animation = document.createElement('style');
            animation.textContent = `
                @keyframes particle-explode-${Date.now()}-${Math.random()} {
                    0% {
                        opacity: 0;
                        transform: translate(0, 0) scale(0);
                    }
                    20% {
                        opacity: 1;
                        transform: translate(${Math.cos(angle) * particleDistance}px, ${Math.sin(angle) * particleDistance}px) scale(1);
                    }
                    100% {
                        opacity: 0;
                        transform: translate(${Math.cos(angle) * particleDistance * 1.5}px, ${Math.sin(angle) * particleDistance * 1.5}px) scale(0);
                    }
                }
            `;
            document.head.appendChild(animation);
            
            const animationDuration = 1.2 + Math.random() * 0.5;
            particle.style.animation = `particle-explode-${Date.now()}-${Math.random()} ${animationDuration}s ease-out forwards`;
            document.body.appendChild(particle);
            
            setTimeout(() => {
                if (particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                }
            }, animationDuration * 1000);
        }
        
        // ÂàõÂª∫ÁÅØÁ¨º‰∏≤
        function createLanternStrings() {
            const lanternCount = 8;
            
            for (let i = 0; i < lanternCount; i++) {
                createLantern(lanternStringLeft, i, lanternCount);
            }
            
            for (let i = 0; i < lanternCount; i++) {
                createLantern(lanternStringRight, i, lanternCount);
            }
            
            startAutoLantern();
        }
        
        function createLantern(container, index, total) {
            const lantern = document.createElement('div');
            lantern.className = 'lantern-item';
            
            const topPosition = (index / (total - 1)) * 90 + 5;
            lantern.style.top = `${topPosition}%`;
            
            const swingDelay = Math.random() * 2;
            const swingDuration = 6 + Math.random() * 4;
            lantern.style.animation = `lanternSwing ${swingDuration}s ease-in-out ${swingDelay}s infinite`;
            
            const lanternHTML = `
                <div class="lantern-top"></div>
                <div class="lantern-body">
                    <div class="lantern-middle"></div>
                    <div class="lantern-light"></div>
                    <div class="lantern-blessing">${lanternBlessings[Math.floor(Math.random() * lanternBlessings.length)]}</div>
                </div>
                <div class="lantern-bottom"></div>
                <div class="lantern-tassel"></div>
            `;
            
            lantern.innerHTML = lanternHTML;
            
            lanterns.push({
                element: lantern,
                container: container,
                index: index
            });
            
            lantern.addEventListener('click', () => {
                clickLantern(lantern);
            });
            
            container.appendChild(lantern);
        }
        
        function startAutoLantern() {
            if (autoLanternInterval) {
                clearInterval(autoLanternInterval);
            }
            
            let interval = 3000;
            if (preMinuteMode) interval = 2000;
            if (isFinal10Seconds) interval = 1000;
            
            autoLanternInterval = setInterval(() => {
                if (lanterns.length > 0) {
                    const randomIndex = Math.floor(Math.random() * lanterns.length);
                    const lantern = lanterns[randomIndex].element;
                    clickLantern(lantern);
                    
                    if (isFinal10Seconds && Math.random() > 0.7) {
                        setTimeout(() => {
                            const additionalIndex = (randomIndex + 1) % lanterns.length;
                            clickLantern(lanterns[additionalIndex].element);
                        }, 200);
                    }
                }
            }, interval);
        }
        
        function clickLantern(lanternElement) {
            lanternElement.classList.add('clicked');
            playLanternSound();
            createLanternParticles(lanternElement);
            
            setTimeout(() => {
                lanternElement.classList.remove('clicked');
            }, 1000);
        }
        
        function createLanternParticles(lanternElement) {
            const rect = lanternElement.getBoundingClientRect();
            const x = rect.left + rect.width / 2;
            const y = rect.top + rect.height / 2;
            
            const particleCount = 8 + Math.floor(Math.random() * 5);
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                const hue = Math.random() > 0.5 ? 10 + Math.random() * 20 : 30 + Math.random() * 30;
                particle.style.background = `hsl(${hue}, 100%, 60%)`;
                particle.style.boxShadow = `0 0 8px hsl(${hue}, 100%, 60%)`;
                
                const size = Math.random() * 4 + 2;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                
                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;
                
                const angle = Math.random() * Math.PI * 2;
                const distance = 20 + Math.random() * 30;
                
                const animationName = `lantern-particle-${Date.now()}-${i}`;
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes ${animationName} {
                        0% {
                            opacity: 0;
                            transform: translate(0, 0) scale(0);
                        }
                        30% {
                            opacity: 1;
                            transform: translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) scale(1);
                        }
                        100% {
                            opacity: 0;
                            transform: translate(${Math.cos(angle) * distance * 1.5}px, ${Math.sin(angle) * distance * 1.5}px) scale(0);
                        }
                    }
                `;
                document.head.appendChild(style);
                
                const animationDuration = 1 + Math.random() * 0.5;
                particle.style.animation = `${animationName} ${animationDuration}s ease-out forwards`;
                document.body.appendChild(particle);
                
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                }, animationDuration * 1000);
            }
        }
        
        // ÁÉüËä±Á≤íÂ≠êÊïàÊûú
        function createFireworkParticles() {
            if (window.particleInterval) clearInterval(window.particleInterval);
            
            let interval = 3000;
            let maxParticles = 10;
            
            if (preMinuteMode) {
                interval = 1500;
                maxParticles = 15;
            }
            
            if (isFinal10Seconds) {
                interval = 500;
                maxParticles = 25;
            }
            
            window.particleInterval = setInterval(() => {
                if (Math.random() > 0.3) {
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * window.innerHeight * 0.8;
                    
                    const particleCount = preMinuteMode ? 15 : (isFinal10Seconds ? 20 : 10);
                    for (let i = 0; i < particleCount; i++) {
                        const particle = document.createElement('div');
                        particle.className = 'particle';
                        
                        let hue;
                        if (isFinal10Seconds) {
                            hue = Math.random() * 30;
                        } else {
                            hue = 30 + Math.random() * 30;
                        }
                        particle.style.background = `hsl(${hue}, 100%, 60%)`;
                        particle.style.boxShadow = `0 0 12px hsl(${hue}, 100%, 60%)`;
                        
                        const baseSize = isFinal10Seconds ? 4 : 2.5;
                        const size = Math.random() * 5 + baseSize;
                        particle.style.width = `${size}px`;
                        particle.style.height = `${size}px`;
                        
                        particle.style.left = `${x}px`;
                        particle.style.top = `${y}px`;
                        
                        const angle = Math.random() * Math.PI * 2;
                        const distance = isFinal10Seconds ? 60 + Math.random() * 80 : 40 + Math.random() * 60;
                        
                        const animation = document.createElement('style');
                        animation.textContent = `
                            @keyframes particle-explode-${Date.now()}-${i} {
                                0% {
                                    opacity: 0;
                                    transform: translate(0, 0) scale(0);
                                }
                                20% {
                                    opacity: 1;
                                    transform: translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) scale(1);
                                }
                                100% {
                                    opacity: 0;
                                    transform: translate(${Math.cos(angle) * distance * 2}px, ${Math.sin(angle) * distance * 2}px) scale(0);
                                }
                            }
                        `;
                        document.head.appendChild(animation);
                        
                        const animationDuration = isFinal10Seconds ? 1.2 : 1.5;
                        particle.style.animation = `particle-explode-${Date.now()}-${i} ${animationDuration}s ease-out forwards`;
                        document.body.appendChild(particle);
                        
                        setTimeout(() => {
                            if (particle.parentNode) {
                                particle.parentNode.removeChild(particle);
                            }
                        }, animationDuration * 1000);
                    }
                }
            }, interval);
        }
        
        // Èü≥È¢ëÁ≥ªÁªü
        function initAudio() {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                createTickSound();
                createTransitionSound();
                createLanternSound();
            } catch (e) {
                console.log("Èü≥È¢ëÁ≥ªÁªüÂàùÂßãÂåñÂ§±Ë¥•ÔºåÂ∞ÜÁªßÁª≠ÈùôÈü≥ËøêË°å");
            }
        }
        
        function createTickSound() {
            const buffer = audioContext.createBuffer(1, audioContext.sampleRate * 0.05, audioContext.sampleRate);
            const channelData = buffer.getChannelData(0);
            
            for (let i = 0; i < buffer.length; i++) {
                const time = i / buffer.length;
                channelData[i] = Math.sin(2 * Math.PI * 800 * time) * Math.exp(-time * 100) * 0.3;
            }
            
            tickSoundBuffer = buffer;
        }
        
        function createTransitionSound() {
            const buffer = audioContext.createBuffer(1, audioContext.sampleRate * 0.1, audioContext.sampleRate);
            const channelData = buffer.getChannelData(0);
            
            for (let i = 0; i < buffer.length; i++) {
                const time = i / buffer.length;
                const freq1 = Math.sin(2 * Math.PI * 600 * time);
                const freq2 = Math.sin(2 * Math.PI * 400 * time);
                channelData[i] = (freq1 * 0.6 + freq2 * 0.4) * Math.exp(-time * 80) * 0.4;
            }
            
            transitionSoundBuffer = buffer;
        }
        
        function createLanternSound() {
            const buffer = audioContext.createBuffer(1, audioContext.sampleRate * 0.05, audioContext.sampleRate);
            const channelData = buffer.getChannelData(0);
            
            for (let i = 0; i < buffer.length; i++) {
                const time = i / buffer.length;
                channelData[i] = Math.sin(2 * Math.PI * 600 * time) * Math.exp(-time * 100) * 0.2 +
                                 Math.sin(2 * Math.PI * 800 * time) * Math.exp(-time * 120) * 0.1;
            }
            
            firecrackerSoundBuffer = buffer;
        }
        
        function playTickSound(isFinal = false) {
            if (!audioContext || !tickSoundBuffer) return;
            
            try {
                const source = audioContext.createBufferSource();
                source.buffer = tickSoundBuffer;
                
                const gainNode = audioContext.createGain();
                gainNode.gain.value = isFinal ? 0.5 : 0.3;
                
                source.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                source.start();
                
                setTimeout(() => {
                    source.stop();
                }, 100);
            } catch (e) {}
        }
        
        function playTransitionSound() {
            if (!audioContext || !transitionSoundBuffer) return;
            
            try {
                const source = audioContext.createBufferSource();
                source.buffer = transitionSoundBuffer;
                
                const gainNode = audioContext.createGain();
                gainNode.gain.value = 0.4;
                
                source.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                source.start();
                
                setTimeout(() => {
                    source.stop();
                }, 150);
            } catch (e) {}
        }
        
        function playLanternSound() {
            if (!audioContext || !firecrackerSoundBuffer) return;
            
            try {
                const source = audioContext.createBufferSource();
                source.buffer = firecrackerSoundBuffer;
                
                const gainNode = audioContext.createGain();
                gainNode.gain.value = 0.3;
                
                source.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                source.start();
                
                setTimeout(() => {
                    source.stop();
                }, 150);
            } catch (e) {}
        }
        
        function playMiniFireworkSound() {
            try {
                if (!audioContext) return;
                
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(500 + Math.random() * 300, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 0.3);
                
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
                
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.4);
            } catch (e) {}
        }
        
        // ËÆ°ÁÆó‰∏ã‰∏Ä‰∏™Êñ∞Âπ¥Êó∂Èó¥
        function calculateNextNewYear() {
            const now = new Date();
            const currentYear = now.getFullYear();
            
            const nextNewYear = new Date(currentYear + 1, 0, 1, 0, 0, 0, 0);
            const thisNewYear = new Date(currentYear, 0, 1, 0, 0, 0, 0);
            
            if (now < thisNewYear) {
                targetYearElem.textContent = currentYear;
                return thisNewYear;
            } else {
                targetYearElem.textContent = currentYear + 1;
                return nextNewYear;
            }
        }
        
        // Êõ¥Êñ∞ÂΩìÂâçÊó∂Èó¥ÊòæÁ§∫
        function updateCurrentTime() {
            const now = new Date();
            const year = now.getFullYear();
            const month = (now.getMonth() + 1).toString().padStart(2, '0');
            const date = now.getDate().toString().padStart(2, '0');
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            
            currentTimeElem.textContent = `${year}Âπ¥${month}Êúà${date}Êó• ${hours}:${minutes}:${seconds}`;
            
            const currentSecond = now.getSeconds();
            if (currentSecond !== lastSecond) {
                lastSecond = currentSecond;
                updateCountdown();
            }
        }
        
        // Êõ¥Êñ∞Êñ∞Âπ¥ËøõÂ∫¶Êù°
        function updateProgressBar(diff, totalMilliseconds) {
            if (totalMilliseconds <= 0 || diff < 0) return;
            
            const elapsed = totalMilliseconds - diff;
            const percent = Math.min(100, Math.max(0, (elapsed / totalMilliseconds) * 100));
            
            progressFill.style.width = `${percent}%`;
            progressPercent.textContent = `${percent.toFixed(2)}%`;
            
            if (percent > 90) {
                progressFill.style.background = "linear-gradient(90deg, #ff3333 0%, #ff6666 50%, #ff3333 100%)";
            } else if (percent > 75) {
                progressFill.style.background = "linear-gradient(90deg, #ffaa00 0%, #ffcc00 50%, #ffaa00 100%)";
            }
            
            updateProgressTime(diff);
        }
        
        function updateProgressTime(diff) {
            if (diff <= 0) {
                progressTime.textContent = "Êñ∞Âπ¥Â∑≤Âà∞ÔºÅ";
                return;
            }
            
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            let timeText = "";
            if (days > 0) timeText += `${days}Â§©`;
            if (hours > 0 || days > 0) timeText += `${hours}Â∞èÊó∂`;
            timeText += `${minutes}ÂàÜ`;
            
            progressTime.textContent = timeText;
        }
        
        // Êï∞Â≠óÂèòÂåñÂä®Áîª - Â¢ûÂº∫Áâà
        function animateNumberChange(element, newValue, type) {
            const oldValue = parseInt(element.textContent) || 0;
            
            if (oldValue !== newValue) {
                element.classList.remove('bounce');
                void element.offsetWidth;
                
                if (isFinal10Seconds) {
                    element.style.animation = 'finalBounce 0.8s ease forwards';
                    playTickSound(true);
                } else {
                    element.style.animation = 'numberBounce 0.6s ease forwards';
                    playTickSound();
                }
                
                if (type === 'seconds' && oldValue === 59 && newValue === 0) {
                    playTransitionSound();
                } else if (type === 'minutes' && oldValue === 59 && newValue === 0) {
                    playTransitionSound();
                } else if (type === 'hours' && oldValue === 23 && newValue === 0) {
                    playTransitionSound();
                }
                
                lastValues[type] = newValue;
            }
        }
        
        // Êõ¥Êñ∞ÂÄíËÆ°Êó∂ÊòæÁ§∫
        function updateCountdown() {
            const now = new Date();
            const diff = nextNewYear - now;
            
            if (diff <= 0 && !isCelebrating) {
                isCelebrating = true;
                celebrateNewYear();
                return;
            }
            
            const totalSeconds = Math.floor(diff / 1000);
            const days = Math.floor(totalSeconds / (3600 * 24));
            const hours = Math.floor((totalSeconds % (3600 * 24)) / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;
            
            const isLastMinute = totalSeconds <= 60 && totalSeconds > 10;
            if (isLastMinute && !preMinuteMode) {
                activatePreMinuteMode();
            } else if (!isLastMinute && preMinuteMode) {
                deactivatePreMinuteMode();
            }
            
            const isFinal10Sec = totalSeconds <= 10 && totalSeconds > 0;
            if (isFinal10Sec && !isFinal10Seconds) {
                activateFinal10Seconds();
            } else if (!isFinal10Sec && isFinal10Seconds) {
                deactivateFinal10Seconds();
            }
            
            animateNumberChange(daysElem, days, 'days');
            animateNumberChange(hoursElem, hours, 'hours');
            animateNumberChange(minutesElem, minutes, 'minutes');
            animateNumberChange(secondsElem, seconds, 'seconds');
            
            daysElem.textContent = days.toString().padStart(2, '0');
            hoursElem.textContent = hours.toString().padStart(2, '0');
            minutesElem.textContent = minutes.toString().padStart(2, '0');
            secondsElem.textContent = seconds.toString().padStart(2, '0');
            
            updateProgressBar(diff, totalMilliseconds);
            adjustFireworkFrequency(totalSeconds);
            updateStatusDisplay(totalSeconds);
        }
        
        // ÊøÄÊ¥ªÊúÄÂêé1ÂàÜÈíüÊ®°Âºè
        function activatePreMinuteMode() {
            preMinuteMode = true;
            timeStatusElem.textContent = "üéá ÊúÄÂêé1ÂàÜÈíüÔºÅ üéá";
            timeStatusElem.style.color = "#ffaa00";
            timeStatusElem.style.textShadow = "0 0 12px rgba(255, 170, 0, 0.9)";
            timeStatusElem.style.animation = "pulse 1.5s infinite";
            
            createFireworkParticles();
            startAutoLantern();
            
            if (window.miniFireworkInterval) clearInterval(window.miniFireworkInterval);
            window.miniFireworkInterval = setInterval(() => {
                if (Math.random() > 0.5) {
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * window.innerHeight * 0.7;
                    
                    const firework = document.createElement('div');
                    firework.className = 'mini-firework';
                    
                    const hue = 20 + Math.random() * 20;
                    firework.style.background = `hsl(${hue}, 100%, 65%)`;
                    firework.style.boxShadow = `0 0 15px hsl(${hue}, 100%, 65%)`;
                    
                    firework.style.left = `${x}px`;
                    firework.style.top = `${y}px`;
                    
                    const animationName = `pre-minute-explode-${Date.now()}`;
                    const style = document.createElement('style');
                    style.textContent = `
                        @keyframes ${animationName} {
                            0% {
                                opacity: 0;
                                transform: scale(0);
                                box-shadow: 0 0 0px hsl(${hue}, 100%, 65%);
                            }
                            30% {
                                opacity: 1;
                                transform: scale(2.5);
                                box-shadow: 0 0 25px hsl(${hue}, 100%, 65%);
                            }
                            100% {
                                opacity: 0;
                                transform: scale(5);
                                box-shadow: 0 0 0px transparent;
                            }
                        }
                    `;
                    document.head.appendChild(style);
                    
                    firework.style.animation = `${animationName} 1.5s ease-out forwards`;
                    document.body.appendChild(firework);
                    
                    playMiniFireworkSound();
                    
                    setTimeout(() => {
                        if (firework.parentNode) {
                            firework.parentNode.removeChild(firework);
                        }
                    }, 1500);
                }
            }, 1500);
            
            adjustFireworkFrequency(60);
            triggerLanternChain();
        }
        
        function triggerLanternChain() {
            const side = Math.random() > 0.5 ? 'left' : 'right';
            const sideLanterns = lanterns.filter(l => 
                l.container.classList.contains(side)
            );
            
            sideLanterns.sort((a, b) => {
                const aTop = parseFloat(a.element.style.top);
                const bTop = parseFloat(b.element.style.top);
                return Math.random() > 0.5 ? aTop - bTop : bTop - aTop;
            });
            
            sideLanterns.forEach((lantern, index) => {
                setTimeout(() => {
                    clickLantern(lantern.element);
                }, index * (200 + Math.random() * 200));
            });
        }
        
        function deactivatePreMinuteMode() {
            preMinuteMode = false;
            timeStatusElem.textContent = "Á≥ªÁªüËøêË°å‰∏≠...";
            timeStatusElem.style.color = "rgba(136, 170, 255, 0.7)";
            timeStatusElem.style.textShadow = "0 0 5px rgba(136, 170, 255, 0.5)";
            timeStatusElem.style.animation = "";
            
            createFireworkParticles();
            startAutoLantern();
            
            if (window.miniFireworkInterval) {
                clearInterval(window.miniFireworkInterval);
            }
        }
        
        // ÊøÄÊ¥ªÊúÄÂêé10ÁßíÊ®°Âºè
        function activateFinal10Seconds() {
            isFinal10Seconds = true;
            finalCountdownActive = true;
            
            finalCountdownStatusElem.style.display = 'block';
            finalCountdownStatusElem.style.animation = "pulse 0.5s infinite";
            timeStatusElem.textContent = "üö® ÊúÄÂêé10ÁßíÔºÅ üö®";
            timeStatusElem.style.color = "#ff4444";
            timeStatusElem.style.textShadow = "0 0 18px rgba(255, 68, 68, 0.9)";
            
            countdownBoxes.forEach(box => {
                box.classList.add('final-countdown');
            });
            
            createFireworkParticles();
            startAutoLantern();
            
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    createFirework(
                        Math.random() * canvas.width,
                        canvas.height * 0.5 + Math.random() * canvas.height * 0.3
                    );
                }, i * 80);
            }
            
            triggerAllLanterns();
            
            document.body.style.animation = 'none';
            setTimeout(() => {
                document.body.style.animation = 'screenShake 0.1s 10';
            }, 10);
            
            const style = document.createElement('style');
            style.textContent = `
                @keyframes screenShake {
                    0%, 100% { transform: translateX(0) translateY(0); }
                    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px) translateY(-2px); }
                    20%, 40%, 60%, 80% { transform: translateX(5px) translateY(2px); }
                }
            `;
            document.head.appendChild(style);
        }
        
        function triggerAllLanterns() {
            lanterns.forEach((lantern, index) => {
                setTimeout(() => {
                    clickLantern(lantern.element);
                }, index * 50);
            });
        }
        
        function deactivateFinal10Seconds() {
            isFinal10Seconds = false;
            finalCountdownActive = false;
            
            finalCountdownStatusElem.style.display = 'none';
            finalCountdownStatusElem.style.animation = "";
            
            countdownBoxes.forEach(box => {
                box.classList.remove('final-countdown');
            });
            
            createFireworkParticles();
            startAutoLantern();
            document.body.style.animation = '';
        }
        
        function updateStatusDisplay(totalSeconds) {
            if (isFinal10Seconds) {
                finalCountdownStatusElem.textContent = `ÊúÄÂêé${totalSeconds}ÁßíÔºÅ`;
                
                if (totalSeconds <= 3) {
                    finalCountdownStatusElem.style.color = "#ff0000";
                    finalCountdownStatusElem.style.textShadow = "0 0 25px rgba(255, 0, 0, 0.9)";
                    finalCountdownStatusElem.style.animation = "pulse 0.3s infinite";
                    
                    if (totalSeconds === 3) {
                        triggerAllLanterns();
                    }
                } else if (totalSeconds <= 7) {
                    finalCountdownStatusElem.style.color = "#ff5500";
                    finalCountdownStatusElem.style.textShadow = "0 0 20px rgba(255, 85, 0, 0.9)";
                    finalCountdownStatusElem.style.animation = "pulse 0.5s infinite";
                }
            }
        }
        
        // Ê†πÊçÆÂâ©‰ΩôÊó∂Èó¥Ë∞ÉÊï¥ÁÉüËä±È¢ëÁéá
        function adjustFireworkFrequency(totalSeconds) {
            if (window.autoFireworkInterval) {
                clearInterval(window.autoFireworkInterval);
            }
            
            let interval;
            let maxFireworks;
            
            if (isFinal10Seconds) {
                interval = 120;
                maxFireworks = 30;
            } else if (totalSeconds < 60) {
                interval = 250;
                maxFireworks = 25;
            } else if (totalSeconds < 3600) {
                interval = 700;
                maxFireworks = 20;
            } else if (totalSeconds < 86400) {
                interval = 1300;
                maxFireworks = 15;
            } else {
                interval = 2500;
                maxFireworks = 12;
            }
            
            window.autoFireworkInterval = setInterval(() => {
                if (fireworks.length < maxFireworks) {
                    createFirework(
                        Math.random() * canvas.width * 0.8 + canvas.width * 0.1,
                        canvas.height
                    );
                }
            }, interval);
        }
        
        // Â∫ÜÁ•ùÊñ∞Âπ¥
        function celebrateNewYear() {
            timeStatusElem.textContent = "üéâ Êñ∞Âπ¥Âø´‰πêÔºÅ üéâ";
            timeStatusElem.style.color = "#ffdd44";
            timeStatusElem.style.animation = "pulse 1s infinite";
            
            progressFill.style.width = "100%";
            progressPercent.textContent = "100%";
            progressTime.textContent = "Êñ∞Âπ¥Â∑≤Âà∞ÔºÅ";
            progressFill.style.background = "linear-gradient(90deg, #ff3333 0%, #ffcc00 50%, #ff3333 100%)";
            
            const newYearMsg = document.createElement('div');
            newYearMsg.className = 'new-year-message';
            newYearMsg.textContent = 'üéâ Êñ∞Âπ¥Âø´‰πêÔºÅ üéâ';
            document.body.appendChild(newYearMsg);
            
            setTimeout(() => {
                if (newYearMsg.parentNode) {
                    newYearMsg.parentNode.removeChild(newYearMsg);
                }
                
                timeStatusElem.textContent = "Á≥ªÁªüËøêË°å‰∏≠...";
                timeStatusElem.style.color = "rgba(136, 170, 255, 0.7)";
                timeStatusElem.style.animation = "";
                isCelebrating = false;
                
                nextNewYear = calculateNextNewYear();
                totalMilliseconds = nextNewYear - new Date();
                updateCountdown();
            }, 12000);
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    createFirework(
                        Math.random() * canvas.width,
                        canvas.height * (0.2 + Math.random() * 0.6)
                    );
                }, i * 100);
            }
            
            for (let i = 0; i < blessings.length; i++) {
                setTimeout(() => {
                    const blessingText = blessings[i];
                    createFloatingBlessing(
                        blessingText,
                        Math.random() * canvas.width * 0.8 + canvas.width * 0.1,
                        canvas.height * 0.8
                    );
                }, i * 200);
            }
            
            triggerAllLanterns();
        }
        
        // ÂàõÂª∫ÁÉüËä±
        function createFirework(x, y) {
            const firework = {
                x: x,
                y: y,
                vx: Math.random() * 3 - 1.5,
                vy: - (Math.random() * 5 + 8),
                color: isFinal10Seconds ? 
                       `hsl(${Math.random() * 30}, 100%, 60%)` :
                       `hsl(${Math.random() * 360}, 100%, 60%)`,
                trail: [],
                exploded: false,
                particles: [],
                size: Math.random() * 3 + 2,
                createdAt: Date.now()
            };
            
            fireworks.push(firework);
            playFireworkSound();
            return firework;
        }
        
        function playFireworkSound() {
            try {
                if (!audioContext) return;
                
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(300 + Math.random() * 300, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(100, audioContext.currentTime + 0.5);
                
                gainNode.gain.setValueAtTime(isFinal10Seconds ? 0.25 : 0.2, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.7);
                
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.7);
            } catch (e) {}
        }
        
        // Á≤íÂ≠êÁ±ª
        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.vx = Math.random() * 6 - 3;
                this.vy = Math.random() * 6 - 3;
                this.color = color;
                this.alpha = 1;
                this.decay = Math.random() * 0.02 + 0.01;
                this.size = Math.random() * 3 + 1;
                this.createdAt = Date.now();
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vy += 0.1;
                this.alpha -= this.decay;
                this.size *= 0.99;
                
                const age = Date.now() - this.createdAt;
                const maxAge = 3000;
                
                if (age > maxAge) {
                    this.alpha = 0;
                }
                
                return this.alpha > 0;
            }
            
            draw(ctx) {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            }
        }
        
        // ÁÉüËä±ÁàÜÁÇ∏ÊïàÊûú
        function explodeFirework(firework) {
            playExplosionSound();
            
            const particleCount = isFinal10Seconds ? 
                                 Math.floor(Math.random() * 100 + 150) :
                                 Math.floor(Math.random() * 70 + 100);
            
            const colors = isFinal10Seconds ? 
                [
                    firework.color,
                    `hsl(${Math.random() * 30}, 100%, 60%)`,
                    `hsl(${Math.random() * 30 + 330 % 360}, 100%, 60%)`
                ] : [
                    firework.color,
                    `hsl(${(parseInt(firework.color.slice(4, -1).split(',')[0]) + 30) % 360}, 100%, 60%)`,
                    `hsl(${(parseInt(firework.color.slice(4, -1).split(',')[0]) + 60) % 360}, 100%, 60%)`
                ];
            
            for(let i = 0; i < particleCount; i++) {
                const color = colors[Math.floor(Math.random() * colors.length)];
                const particle = new Particle(firework.x, firework.y, color);
                particles.push(particle);
            }
            
            if(Math.random() > 0.3) {
                const blessingText = blessings[Math.floor(Math.random() * blessings.length)];
                createFloatingBlessing(blessingText, firework.x, firework.y);
            }
        }
        
        function playExplosionSound() {
            try {
                if (!audioContext) return;
                
                for(let i = 0; i < (isFinal10Seconds ? 6 : 4); i++) {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    const freq = isFinal10Seconds ? 
                                 (150 + Math.random() * 600) :
                                 (100 + Math.random() * 500);
                    oscillator.frequency.setValueAtTime(freq, audioContext.currentTime);
                    oscillator.frequency.exponentialRampToValueAtTime(50, audioContext.currentTime + 0.5);
                    
                    gainNode.gain.setValueAtTime(isFinal10Seconds ? 0.15 : 0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.5);
                }
            } catch (e) {}
        }
        
        // ÂàõÂª∫ÊµÆÂä®Á•ùÁ¶èËØ≠
        function createFloatingBlessing(text, x, y) {
            const blessing = document.createElement('div');
            blessing.className = 'floating-blessing';
            blessing.textContent = text;
            
            let hue;
            if (isFinal10Seconds) {
                hue = Math.random() * 30;
            } else {
                hue = Math.random() * 20 + 30;
            }
            blessing.style.color = `hsl(${hue}, 100%, 70%)`;
            blessing.style.left = `${x}px`;
            blessing.style.top = `${y}px`;
            
            if (isFinal10Seconds) {
                blessing.style.fontSize = '38px';
                blessing.style.fontWeight = '900';
            }
            
            document.body.appendChild(blessing);
            
            setTimeout(() => {
                if (blessing.parentNode) {
                    blessing.parentNode.removeChild(blessing);
                }
            }, 5000);
            
            return blessing;
        }
        
        // ‰∏ªÂä®ÁîªÂæ™ÁéØ
        function animate() {
            ctx.fillStyle = isFinal10Seconds ? 
                           'rgba(10, 10, 32, 0.08)' :
                           'rgba(10, 10, 32, 0.12)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            for(let i = fireworks.length - 1; i >= 0; i--) {
                const firework = fireworks[i];
                
                if(!firework.exploded) {
                    firework.x += firework.vx;
                    firework.y += firework.vy;
                    firework.vy += 0.1;
                    
                    firework.trail.push({x: firework.x, y: firework.y});
                    if(firework.trail.length > 10) {
                        firework.trail.shift();
                    }
                    
                    for(let j = 0; j < firework.trail.length; j++) {
                        const point = firework.trail[j];
                        const alpha = j / firework.trail.length;
                        const size = firework.size * alpha;
                        
                        ctx.beginPath();
                        ctx.arc(point.x, point.y, size, 0, Math.PI * 2);
                        ctx.fillStyle = `rgba(255, 220, 100, ${alpha * 0.8})`;
                        ctx.fill();
                    }
                    
                    ctx.beginPath();
                    ctx.arc(firework.x, firework.y, firework.size, 0, Math.PI * 2);
                    ctx.fillStyle = firework.color;
                    ctx.fill();
                    
                    const glowSize = isFinal10Seconds ? firework.size * 5 : firework.size * 3.5;
                    const gradient = ctx.createRadialGradient(
                        firework.x, firework.y, 0,
                        firework.x, firework.y, glowSize
                    );
                    gradient.addColorStop(0, `${firework.color}90`);
                    gradient.addColorStop(1, 'transparent');
                    
                    ctx.beginPath();
                    ctx.arc(firework.x, firework.y, glowSize, 0, Math.PI * 2);
                    ctx.fillStyle = gradient;
                    ctx.fill();
                    
                    if(firework.vy >= 0) {
                        firework.exploded = true;
                        explodeFirework(firework);
                    }
                }
                
                if(firework.exploded && firework.particles.length === 0) {
                    fireworks.splice(i, 1);
                }
            }
            
            for(let i = particles.length - 1; i >= 0; i--) {
                const particle = particles[i];
                const alive = particle.update();
                
                if(alive) {
                    particle.draw(ctx);
                } else {
                    particles.splice(i, 1);
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        // ÂàùÂßãÂåñ
        function init() {
            initAudio();
            nextNewYear = calculateNextNewYear();
            const now = new Date();
            totalMilliseconds = nextNewYear - now;
            
            createStarryBackground();
            createSnowfall();
            createMiniFireworks();
            createLanternStrings();
            createFireworkParticles();
            createCornerFireworks();
            
            setInterval(updateCurrentTime, 1000);
            updateCurrentTime();
            updateCountdown();
            
            for(let i = 0; i < 5; i++) {
                setTimeout(() => {
                    createFirework(
                        Math.random() * canvas.width,
                        canvas.height
                    );
                }, i * 300);
            }
            
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                
                lanterns.forEach(l => {
                    if (l.element.parentNode) {
                        l.element.parentNode.removeChild(l.element);
                    }
                });
                lanterns = [];
                createLanternStrings();
            });
            
            canvas.addEventListener('click', (e) => {
                createFirework(e.clientX, e.clientY);
            });
            
            animate();
        }
        
        window.addEventListener('load', init);
    </script>
</body>
</html>